(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{260:function(e,t,n){},270:function(e,t){},272:function(e,t){},286:function(e,t){},288:function(e,t){},316:function(e,t){},318:function(e,t){},319:function(e,t){},324:function(e,t){},326:function(e,t){},332:function(e,t){},334:function(e,t){},353:function(e,t){},365:function(e,t){},368:function(e,t){},491:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(12),s=n.n(r),o=(n(260),n(43)),i=n(10),l=n(19),u=n.n(l),d=n(27),j=n(14),b=n(540),h=n(494),p=n(2);function f(){var e=Object(i.f)(),t=Object(a.useState)(""),n=Object(j.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),l=Object(j.a)(s,2),f=l[0],O=l[1];function x(){return(x=Object(d.a)(u.a.mark((function t(){var n,a,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(c,f),t.prev=1,t.next=4,fetch("/users/login",{method:"POST",body:JSON.stringify({username:c,password:f}),headers:{"Content-Type":"application/json"}});case 4:if(200!==(n=t.sent).status){t.next=14;break}return t.next=8,n.json();case 8:a=t.sent,r=a.token,localStorage.token=r,e.push("/"),t.next=15;break;case 14:401===n.status&&(alert("username or password not found, please try again"),O(""));case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[1,17]])})))).apply(this,arguments)}return Object(p.jsx)("div",{className:"centerdiv",children:Object(p.jsxs)("div",{className:"logindiv",children:[Object(p.jsx)(b.a,{label:"Username",value:c,onChange:function(e){r(e.target.value)}}),Object(p.jsx)(b.a,{label:"Password",type:"password",value:f,onChange:function(e){O(e.target.value)}}),Object(p.jsx)(h.a,{variant:"contained",color:"primary",onClick:function(){return x.apply(this,arguments)},children:"Login"}),Object(p.jsxs)("p",{children:["don't have an account? ",Object(p.jsx)(o.b,{to:"/register",children:"Register"})," "]})]})})}function O(){var e=Object(a.useState)(""),t=Object(j.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(j.a)(r,2),l=s[0],f=s[1],O=Object(a.useState)(""),x=Object(j.a)(O,2),m=x[0],v=x[1],g=Object(a.useState)(""),y=Object(j.a)(g,2),k=y[0],w=y[1],S=Object(i.f)();function E(){return(E=Object(d.a)(u.a.mark((function e(){var t,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n&&l&&m&&k){e.next=3;break}throw new Error("all fields must be full");case 3:return e.next=5,fetch("/users/register",{method:"POST",body:JSON.stringify({username:n,f_name:l,l_name:m,password:k}),headers:{"Content-Type":"application/json"}});case 5:if(200!==(t=e.sent).status){e.next=13;break}return e.next=9,t.json();case 9:a=e.sent,r=a.token,localStorage.token=r,S.push("/");case 13:403===t.status&&(c(""),alert("username is taken")),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),(e.t0="all fields must be full")&&alert("all fields must be full");case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}return Object(p.jsx)("div",{className:"centerdiv",children:Object(p.jsxs)("div",{className:"logindiv",children:[Object(p.jsx)(b.a,{label:"Username",value:n,onChange:function(e){c(e.target.value)}}),Object(p.jsx)(b.a,{label:"Password",type:"password",value:k,onChange:function(e){w(e.target.value)}}),Object(p.jsx)(b.a,{label:"First name",value:l,onChange:function(e){f(e.target.value)}}),Object(p.jsx)(b.a,{label:"Last name",value:m,onChange:function(e){v(e.target.value)}}),Object(p.jsx)(h.a,{variant:"contained",color:"primary",onClick:function(){return E.apply(this,arguments)},children:"Register"}),Object(p.jsxs)("p",{children:["already have an account? ",Object(p.jsx)(o.b,{to:"/login",children:"Login"})," "]})]})})}var x=n(40),m=n(238),v=n.n(m),g=n(538),y=n(531),k=n(532),w=n(533),S=n(537),E=n(535),N=n(534),C=n(536),T=n(241),_=n.n(T),A=n(242),M=n.n(A),L=n(240),P=n.n(L),U=n(239),I=n.n(U);function R(e){var t=e.vacation,n=e.update,c=Object(i.f)(),r=Object(x.c)((function(e){return e.auth})),s=Object(x.c)((function(e){return e.user})),o=Object(a.useState)(!1),l=Object(j.a)(o,2),b=l[0],f=l[1],O=Object(y.a)({root:{maxWidth:345},media:{height:140}})();function m(){return(m=Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/data/follow/"+t.id,{headers:{Authorization:"".concat(localStorage.token)}});case 3:201===(n=e.sent).status&&f(!0),204===n.status&&f(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function v(){return(v=Object(d.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/data/"+t.id,{method:"DELETE",headers:{Authorization:"".concat(localStorage.token)}});case 2:204===(a=e.sent).status?n():console.log(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){s===t.user_id&&f(!0)}),[]),Object(p.jsx)("div",{className:"listcomponent",children:Object(p.jsxs)(k.a,{className:O.root,children:[Object(p.jsxs)(w.a,{children:[Object(p.jsx)(N.a,{className:O.media,style:{height:0,paddingTop:"56.25%"},image:"".concat(t.image),title:"Vacation Destination"}),Object(p.jsxs)(E.a,{children:[Object(p.jsx)(C.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t.destination}),Object(p.jsx)(C.a,{variant:"body2",color:"textSecondary",component:"p",children:t.description})]})]}),Object(p.jsxs)(S.a,{children:[Object(p.jsxs)(C.a,{variant:"h6",component:"h4",children:[t.price,"$"]}),r?Object(p.jsxs)(g.a,{color:"primary",children:[Object(p.jsx)(h.a,{onClick:function(){c.push("/form/".concat(t.id))},children:Object(p.jsx)(I.a,{})}),Object(p.jsx)(h.a,{onClick:function(){return v.apply(this,arguments)},children:Object(p.jsx)(P.a,{})})]}):Object(p.jsx)(h.a,{onClick:function(){return m.apply(this,arguments)},children:b?Object(p.jsx)(_.a,{color:"primary"}):Object(p.jsx)(M.a,{})})]})]})})}var V=n(539),F=Object(y.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}}));function z(e){var t=e.vacations,n=e.update,c=F();return Object(a.useEffect)((function(){n()}),[]),Object(p.jsx)("div",{className:c.root,id:"listcont",children:Object(p.jsx)(V.a,{container:!0,spacing:3,children:t.map((function(e){return Object(p.jsx)(V.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(p.jsx)(R,{className:c.paper,vacation:e,update:n},e.id)},e.id)}))})})}var B=n(529),H=n(530);function D(e){var t=e.vacations,n=Object(i.f)(),c=Object(i.g)(),r=Object(a.useState)(""),s=Object(j.a)(r,2),o=s[0],l=s[1],f=Object(a.useState)(""),O=Object(j.a)(f,2),x=O[0],m=O[1],v=Object(a.useState)(""),g=Object(j.a)(v,2),k=g[0],w=g[1],S=Object(a.useState)(""),E=Object(j.a)(S,2),N=E[0],C=E[1],T=Object(a.useState)(""),_=Object(j.a)(T,2),A=_[0],M=_[1],L=Object(a.useState)(""),P=Object(j.a)(L,2),U=P[0],I=P[1],R=Object(y.a)((function(){return{mb:{margin:5}}}))();function V(){return(V=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,x&&o&&k&&N&&A&&U){e.next=4;break}throw alert("all fields must be full"),new Error("all fields must be filled out");case 4:if(!(U<0||isNaN(U))){e.next=8;break}throw console.log("yea wat"),document.getElementById("component-error-text").hidden=!1,new Error("price must be a number");case 8:return e.next=10,fetch("/data/add",{method:"POST",body:JSON.stringify({description:x,destination:o,image:k,start_date:N,end_date:A,price:U}),headers:{"Content-Type":"application/json",Authorization:localStorage.token}});case 10:201===e.sent.status&&n.push("/"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function F(){return(F=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,x&&o&&k&&N&&A&&U){e.next=4;break}throw alert("all fields must be full"),new Error("all fields must be filled out");case 4:if(!(U<0||isNaN(U))){e.next=8;break}throw console.log("yea wat"),document.getElementById("component-error-text").hidden=!1,new Error("price must be a number");case 8:return e.next=10,fetch("/data/"+c.vacnum,{method:"PUT",body:JSON.stringify({description:x,destination:o,image:k,start_date:N,end_date:A,price:U}),headers:{"Content-Type":"application/json",Authorization:localStorage.token}});case 10:t=e.sent,console.log(t),200===t.status&&n.push("/"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){if(console.log(t),c.vacnum&&t.length){var e=t.find((function(e){return e.id==c.vacnum}));e?(l(e.destination),m(e.description),w(e.image),C(e.start_date.substring(0,10)),M(e.end_date.substring(0,10)),I(e.price)):n.push("/")}else l(""),m(""),w(""),C(""),M(""),I("")}),[t]),Object(p.jsxs)("div",{className:"form",children:[Object(p.jsxs)("div",{className:"formsep",children:[Object(p.jsx)(b.a,{className:R.mb,label:"Destination",value:o,onChange:function(e){l(e.target.value)}}),Object(p.jsx)(b.a,{className:R.mb,label:"Description",id:"description",value:x,onChange:function(e){m(e.target.value)}}),Object(p.jsx)(b.a,{className:R.mb,label:"Image address",value:k,onChange:function(e){w(e.target.value)}})]}),Object(p.jsxs)("div",{className:"formdate",children:[Object(p.jsx)(b.a,{id:"start",label:"Vacation start",type:"date",value:N,onChange:function(e){C(e.target.value)},InputLabelProps:{shrink:!0}}),Object(p.jsx)(b.a,{id:"end",label:"Vacation end",type:"date",value:A,onChange:function(e){M(e.target.value)},InputLabelProps:{shrink:!0}})]}),Object(p.jsxs)("div",{className:"formsep",children:[Object(p.jsxs)(B.a,{error:!0,children:[Object(p.jsx)(b.a,{className:R.mb,label:"Price",value:U,onChange:function(e){I(e.target.value),document.getElementById("component-error-text").hidden=!0}}),Object(p.jsx)(H.a,{hidden:!0,id:"component-error-text",children:"Use numbers only!"})]}),Object(p.jsx)(h.a,{variant:"contained",color:"primary",onClick:c.vacnum?function(){return F.apply(this,arguments)}:function(){return V.apply(this,arguments)},children:"Complete"})]})]})}var J=n(245);function G(e){var t=e.vacations,n=Object(a.useState)({}),c=Object(j.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){t.length>0&&(s({labels:t.map((function(e){return e.destination})),datasets:[{label:"followers",data:t.map((function(e){return e.follows})),backgroundColor:t.map((function(e){return"rgba(".concat(Math.floor(255*Math.random()),", ").concat(Math.floor(255*Math.random()),", ").concat(Math.floor(255*Math.random()),", 0.6)")}))}]}),console.log(r),console.log(t))}),[t]),Object(p.jsx)("div",{className:"chartcontainer",children:Object(p.jsx)("div",{className:"ch",children:Object(p.jsx)(J.a,{type:"bar",data:r,options:{title:{display:!0,text:"All Vcacations",fontSize:25},legend:{display:!0,position:"right"}}})})})}function W(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(j.a)(r,2),o=s[0],l=s[1],b=Object(x.c)((function(e){return e.fname})),f=Object(x.c)((function(e){return e.auth})),O=Object(x.b)(),m=Object(i.f)();return Object(a.useEffect)((function(){Object(d.a)(u.a.mark((function e(){var t,n,a,r,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!localStorage.token){e.next=33;break}return e.next=4,v.a.verify(localStorage.token,"banana");case 4:return t=e.sent,e.next=7,O({type:"SET_USER",value:t.id});case 7:return e.next=9,O({type:"SET_FNAME",value:t.f_name});case 9:if(!t.type){e.next=21;break}return e.next=12,O({type:"SET_AUTH"});case 12:return e.next=14,fetch("/data/chart",{method:"GET",headers:{Authorization:"".concat(localStorage.token)}});case 14:return n=e.sent,e.next=17,n.json();case 17:a=e.sent,c(a.dbdata),e.next=31;break;case 21:return e.next=23,O({type:"REMOVE_AUTH"});case 23:return e.next=25,fetch("/data",{method:"GET",headers:{Authorization:"".concat(localStorage.token)}});case 25:return r=e.sent,e.next=28,r.json();case 28:s=e.sent,o=s.dbdata.map((function(e){return e})),c(o);case 31:e.next=34;break;case 33:m.push("/login");case 34:e.next=41;break;case 36:e.prev=36,e.t0=e.catch(0),"TokenExpiredError"===e.t0.name&&console.log("your session has expired, please login again"),m.push("/login"),console.log(e.t0);case 41:case"end":return e.stop()}}),e,null,[[0,36]])})))()}),[o]),Object(p.jsxs)("div",{className:"main",children:[Object(p.jsxs)("div",{className:"header",children:[Object(p.jsxs)("div",{className:"fl",children:[Object(p.jsx)("img",{src:"logo.png",alt:"vacater logo"}),Object(p.jsx)("div",{className:"navbar",children:f?Object(p.jsxs)("div",{className:"adminnav",children:[Object(p.jsx)(h.a,{onClick:function(){m.push("/")},children:"Home"}),Object(p.jsx)(h.a,{onClick:function(){m.push("/form")},children:"New Vacation"}),Object(p.jsx)(h.a,{onClick:function(){m.push("/charts")},children:"Charts"})]}):Object(p.jsx)("p",{children:"Happy Browsing!"})})]}),Object(p.jsxs)("div",{className:"div",children:[Object(p.jsxs)("p",{children:["Hello ",b,"!"]}),Object(p.jsx)(h.a,{variant:"contained",color:"primary",onClick:function(){localStorage.removeItem("token"),m.push("/login")},children:"Logout"})]})]}),Object(p.jsxs)(i.c,{children:[Object(p.jsx)(i.a,{path:"/",exact:!0,children:Object(p.jsx)(z,{vacations:n,update:function(){l(!o)}})}),Object(p.jsx)(i.a,{path:"/form/:vacnum",children:Object(p.jsx)(D,{vacations:n})}),Object(p.jsx)(i.a,{path:"/form",exact:!0,children:Object(p.jsx)(D,{})}),Object(p.jsx)(i.a,{path:"/charts",children:Object(p.jsx)(G,{vacations:n})})]}),Object(p.jsx)("div",{className:"footer",children:Object(p.jsxs)("div",{children:["Logo made by ",Object(p.jsx)("a",{href:"https://www.designevo.com/",title:"Free Online Logo Maker",children:"DesignEvo free logo creator"})]})})]})}function $(){return Object(p.jsx)(o.a,{children:Object(p.jsxs)(i.c,{children:[Object(p.jsx)(i.a,{path:"/login",children:Object(p.jsx)(f,{})}),Object(p.jsx)(i.a,{path:"/register",children:Object(p.jsx)(O,{})}),Object(p.jsx)(i.a,{path:"/",children:Object(p.jsx)(W,{})})]})})}var q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,542)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},K=(n(233),n(148)),Q=Object(K.b)(Object(K.a)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.value;case"REMOVE_USER":return 0;default:return e}},fname:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[""],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FNAME":return t.value;case"REMOVE_NAME":return"";default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTH":return!0;case"REMOVE_AUTH":return!1;default:return e}}}));s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(x.a,{store:Q,children:Object(p.jsx)($,{})})}),document.getElementById("root")),q()}},[[491,1,2]]]);
//# sourceMappingURL=main.f2fa298f.chunk.js.map